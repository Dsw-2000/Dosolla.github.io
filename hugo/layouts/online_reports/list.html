<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Reports</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="light-mode">
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-left">
                <a href="/" class="nav-logo">
                    <span class="logo-main">DOSOLLA</span>
                    <span class="logo-subtitle">Sound Designer & Tech Explorer</span>
                </a>
            </div>
            <div class="nav-center">
                <a href="/about/" class="nav-link">About</a>
                <a href="/online_reports/" class="nav-link active">Online Reports</a>
                <a href="/publications/" class="nav-link">Publications</a>
                <a href="/researches/" class="nav-link">Researches</a>
                <a href="/box/" class="nav-link">BOX</a>
            </div>
            <div class="nav-right">
                <button class="search-btn" id="searchBtn">
                    <i class="fas fa-search"></i>
                </button>
                <button class="theme-toggle" id="themeToggle">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- 搜索框 -->
    <div class="search-overlay" id="searchOverlay">
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="Search by title, content, tags..." autocomplete="off">
            <button class="search-close" id="searchClose">
                <i class="fas fa-times"></i>
            </button>
            <div class="search-results" id="searchResults"></div>
        </div>
    </div>

    <div class="container">
        <div class="page-header">
            <h2>Online Reports</h2>
            <p>Latest articles, research reports, and recommended materials</p>
        </div>
        <div class="reports-layout">
            <div class="reports-sidebar">
                <h3 class="sidebar-title">Categories</h3>
                <div class="category-nav">
                    {{/* 定义固定类别和保存所有页面集合 */}}
                    {{ $categories := slice "All" "Experiments" "Tutorials" "Scripts Sharing" "Resources" "Blogs" }}
                    {{ $allPages := .Pages }}
                    {{ range $cat := $categories }}
                        {{ if eq $cat "All" }}
                            {{ $count := len $allPages }}
                            <a href="#" class="category-nav-item active" data-category="all">
                                <span class="category-title">{{ $cat }}</span>
                                <span class="category-count">({{ $count }})</span>
                            </a>
                        {{ else }}
                            {{ $count := 0 }}
                            {{ range $allPages }}
                                {{ if in .Params.categories $cat }}
                                    {{ $count = add $count 1 }}
                                {{ end }}
                            {{ end }}
                            <a href="#" class="category-nav-item" data-category="{{ $cat | urlize }}">
                                <span class="category-title">{{ $cat }}</span>
                                <span class="category-count">({{ $count }})</span>
                            </a>
                        {{ end }}
                    {{ end }}
                </div>
            </div>
            <div class="reports-content">
                {{ range .Pages }}
                <a href="{{ .RelPermalink }}" class="blog-card-link" data-categories="{{ .Params.categories | jsonify }}">
                <article id="article-{{ .File.TranslationBaseName }}" class="blog-card">
                    <div class="blog-meta">
                        <span class="blog-date">{{ .Date.Format "2006年1月2日" }}</span>
                        {{ if .Params.categories }}
                        <span class="blog-category">{{ index .Params.categories 0 }}</span>
                        {{ end }}
                    </div>
                    <h3 class="blog-title">{{ .Title }}</h3>
                    <p class="blog-excerpt">{{ .Description }}</p>
                </article>
                </a>
                {{ end }}
            </div>
        </div>
    </div>
    <script src="/js/fuse.min.js"></script>
    <script src="/js/script.js"></script>
    <script>
        // 类别筛选功能
        document.addEventListener('DOMContentLoaded', function() {
            const categoryItems = document.querySelectorAll('.category-nav-item');
            const blogCards = document.querySelectorAll('.blog-card-link');
            
            categoryItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // 移除所有active类
                    categoryItems.forEach(cat => cat.classList.remove('active'));
                    // 添加active类到当前点击的项
                    this.classList.add('active');
                    
                    const selectedCategory = this.getAttribute('data-category');
                    
                    blogCards.forEach(card => {
                        if (selectedCategory === 'all') {
                            card.style.display = 'block';
                        } else {
                            const cardCategories = JSON.parse(card.getAttribute('data-categories') || '[]');
                            const categoryMatches = cardCategories.some(cat => 
                                cat.toLowerCase().replace(/\s+/g, '-') === selectedCategory
                            );
                            card.style.display = categoryMatches ? 'block' : 'none';
                        }
                    });
                });
            });
        });
    </script>
</body>
</html> 